Error:
  type: object
  description: Standard error response format
  properties:
    error:
      type: string
      description: Error message
    requestId:
      type: string
      description: Request ID for tracing (if available)
      example: '550e8400-e29b-41d4-a716-446655440000'
    code:
      type: string
      description: Error code for programmatic handling
      example: 'VALIDATION_ERROR'
    details:
      type: object
      description: Additional error details (development only)
Success:
  type: object
  properties:
    success:
      type: boolean
      example: true
Account:
  type: object
  properties:
    id:
      type: string
    name:
      type: string
    type:
      type: string
      enum: [checking, savings, credit, investment, mortgage, debt, other]
    offbudget:
      type: boolean
    closed:
      type: boolean
Transaction:
  type: object
  properties:
    id:
      type: string
    amount:
      type: integer
      description: Amount in cents
    payee_id:
      type: string
    notes:
      type: string
    date:
      type: string
      format: date
    category:
      type: string
    account:
      type: string
    cleared:
      type: boolean
    subtransactions:
      type: array
      description: Only present in get or create for split transactions
      items:
        type: object
        properties:
          amount:
            type: integer
          category:
            type: string
          notes:
            type: string
    imported_id:
      type: string
      description: Bank-provided unique id used to avoid duplicates
    imported_payee:
      type: string
      description: Raw description from import source
    transfer_id:
      type: string
      description: If a transfer, id of corresponding transaction in other account

NewTransaction:
  type: object
  properties:
    amount:
      type: integer
    payee:
      type: string
    payee_name:
      type: string
      description: Only valid in create/import; creates or matches a payee
    imported_payee:
      type: string
    notes:
      type: string
    date:
      type: string
      format: date
    category:
      type: string
    imported_id:
      type: string
    transfer_id:
      type: string
    cleared:
      type: boolean
    subtransactions:
      type: array
      items:
        type: object
        properties:
          amount:
            type: integer
          category:
            type: string
          notes:
            type: string
Category:
  type: object
  properties:
    id:
      type: string
    name:
      type: string
    group_id:
      type: string
CategoryGroup:
  type: object
  properties:
    id:
      type: string
    name:
      type: string
    is_income:
      type: boolean
Payee:
  type: object
  properties:
    id:
      type: string
    name:
      type: string
    transfer_acct:
      type: string
Schedule:
  type: object
  properties:
    id:
      type: string
    name:
      type: string
    rule:
      type: string
    next_date:
      type: string
    completed:
      type: boolean
    posts_transaction:
      type: boolean
    payee:
      type: string
      nullable: true
    account:
      type: string
      nullable: true
    amount:
      type: integer
      description: Amount in cents; see amountOp for behavior
    amountOp:
      type: string
      enum: [is, isapprox, isbetween]
    date:
      type: string
      format: date
      description: Either a single date or omitted when using recurrence
    recur:
      $ref: '#/RecurConfig'
Rule:
  type: object
  properties:
    id:
      type: string
    conditions:
      type: array
      items:
        type: object
    actions:
      type: array
      items:
        type: object
    stage:
      type: string
      enum: [pre, default, post]
AuthTokens:
  type: object
  properties:
    access_token:
      type: string
    refresh_token:
      type: string
    expires_in:
      type: integer
    token_type:
      type: string
      example: Bearer
    scope:
      type: string
Balance:
  type: object
  properties:
    success:
      type: boolean
      example: true
    balance:
      type: integer
      description: Balance in cents
      example: 12345
CreateAccountRequest:
  type: object
  required: [account]
  properties:
    account:
      type: object
      required: [name]
      properties:
        name:
          type: string
          example: Checking Account
        offbudget:
          type: boolean
          example: true
        closed:
          type: boolean
          example: false
    initialBalance:
      type: integer
      description: Initial balance in cents (1000 = $10.00)
      example: 10000
UpdateAccountRequest:
  type: object
  required: [fields]
  properties:
    fields:
      type: object
      properties:
        name:
          type: string
          example: Updated Account Name
        offbudget:
          type: boolean
          example: false
        closed:
          type: boolean
          example: false
RecurConfig:
  type: object
  properties:
    frequency:
      type: string
      enum: [daily, weekly, monthly, yearly]
    interval:
      type: integer
    patterns:
      type: array
      items:
        type: object
    skipWeekend:
      type: boolean
    start:
      type: string
    endMode:
      type: string
      enum: [never, after_n_occurrences, on_date]
    endOccurrences:
      type: integer
    endDate:
      type: string
    weekendSolveMode:
      type: string
      enum: [before, after]

CloseAccountRequest:
  type: object
  properties:
    transferAccountId:
      type: string
      description: Account to transfer remaining balance to
      example: account-uuid
    transferCategoryId:
      type: string
      description: Category for transfer transaction
      example: category-uuid

Metrics:
  type: object
  description: Full application metrics snapshot
  properties:
    requests:
      type: object
      properties:
        total:
          type: integer
          description: Total number of requests processed
          example: 1234
        errors:
          type: integer
          description: Total number of error responses (4xx, 5xx)
          example: 5
        byMethod:
          type: object
          description: Request count by HTTP method
          additionalProperties:
            type: integer
          example:
            GET: 800
            POST: 300
            PUT: 100
            DELETE: 34
        byRoute:
          type: object
          description: Request count by route pattern
          additionalProperties:
            type: integer
          example:
            '/accounts': 200
            '/transactions': 150
            '/auth/login': 50
    responseTimes:
      type: array
      description: Array of response times in milliseconds (last 1000 requests)
      items:
        type: integer
      example: [45, 52, 38, 67, 42]
    errorRates:
      type: object
      properties:
        byStatus:
          type: object
          description: Error count by HTTP status code
          additionalProperties:
            type: integer
          example:
            '400': 2
            '401': 1
            '404': 1
            '500': 1
    averageResponseTime:
      type: string
      description: Average response time in milliseconds
      example: '52ms'
    errorRate:
      type: string
      description: Error rate as percentage
      example: '0.41%'

MetricsSummary:
  type: object
  description: Lightweight summary of key metrics
  properties:
    requests:
      type: object
      properties:
        total:
          type: integer
          description: Total number of requests
          example: 1234
        errors:
          type: integer
          description: Total number of errors
          example: 5
        byMethod:
          type: object
          description: Request count by HTTP method
          additionalProperties:
            type: integer
          example:
            GET: 800
            POST: 300
            PUT: 100
            DELETE: 34
    performance:
      type: object
      properties:
        averageResponseTime:
          type: string
          description: Average response time
          example: '52ms'
        errorRate:
          type: string
          description: Error rate percentage
          example: '0.41%'
